var _9,_1,_13,_5,_39,_15,_31,_10=2*Math.PI,_17="object",_11="undefined",width,height,_20,_7=0,_6=0,_14,_22=57005*((new Date).getMilliseconds()*(new Date).getSeconds()+1),_21=48879*((new Date).getMilliseconds()*(new Date).getMinutes()+1);function _52(){_5="#000";_15=1;_31=_14=0;_1.globalAlpha=1;_20=[];_45("#fff")}color=set_default_color=function(a){_5=a};line_thickness=set_default_line_thickness=function(a){_15=a};_45=set_default_background_color=background_color=function(a){_39=_9.style.backgroundColor=a};function line(a,b,c,d,e,f){with(_1)beginPath(),lineWidth=f||_15,strokeStyle=e||_5,moveTo(a,b),lineTo(c,d),stroke()}function circle(a,b,c,d,e){with(_1)beginPath(),lineWidth=e||_15,strokeStyle=d||_5,arc(a,b,c,0,_10,0),stroke()}disk=fill_circle=function(a,b,c,d){with(_1)beginPath(),fillStyle=d||_5,arc(a,b,c,0,_10,0),fill()};function rectangle(a,b,c,d,e,f){with(_1)beginPath(),lineWidth=f||_15,strokeStyle=e||_5,rect(a,b,c-a,d-b),stroke()}sheet=fill_rectangle=function(a,b,c,d,e){_1.fillStyle=e||_5;_1.fillRect(a,b,c-a,d-b)};function _37(a,b){with(_1){beginPath();moveTo(a[0],b[0]);for(var c=1;c<a.length;c++)lineTo(a[c],b[c]);closePath()}}_47=polygon=function(a,b,c,d){with(_1)lineWidth=d||_15,strokeStyle=c||_5,_37(a,b),stroke()};_54=fill_polygon=function(a,b,c){_1.fillStyle=c||_5;_37(a,b);_1.fill()};function rotate(a){_31=_10*a/360}function opacity(a){_1.globalAlpha=a/100}function _40(a,b,c,d,e){for(var f=[],g=[],h=0,k=_31;h<e;h++,k+=_10/e)f[h]=a+(h%2?c:d)*Math.sin(k),g[h]=b-(h%2?c:d)*Math.cos(k);return[f,g]}function regular_polygon(a,b,c,d,e,f){star(a,b,c,c,d/2,e,f)}function fill_regular_polygon(a,b,c,d,e){fill_star(a,b,c,c,d/2,e)}function star(a,b,c,d,e,f,g){a=_40(a,b,c,d,2*e);_47(a[0],a[1],f,g)}function fill_star(a,b,c,d,e,f){a=_40(a,b,c,d,2*e);_54(a[0],a[1],f)}function clear_canvas(){_13.innerHTML="";var a=_1.globalAlpha;_1.globalAlpha=1;fill_rectangle(0,0,width,height,_39);_1.globalAlpha=a}function _57(a){var b=document.createElement("canvas");b.width=a.width;b.height=a.height;b.getContext("2d").drawImage(a,0,0);return b}function begin_animation(){_20=[]}function new_frame(){_20.push(_57(_9))}function animate(a){_7||_14||(_7=1,_42(0,1E3*a||100))}function _42(a,b){_1.drawImage(_20[a%_20.length],0,0);_6?_6=_7=0:setTimeout(function(){_42(a+1,b)},b)}(function(){var a,b;for(b in a={add:function(a,b){return a+b},subtract:function(a,b){return a-b},multiply:function(a,b){return a*b},divide:function(a,b){return a/b},negative:function(a){return-a},minus:function(a){return-a}})Array.prototype[b]=function(a){return function(b){for(var e=this.length,f=[];0<e--;)f[e]=a(this[e],typeof b===_17?b[e%b.length]:b);return f}}(a[b])})();Array.prototype.loop=function(a){if("function"===typeof a){for(var b=0,c=[];b<this.length;b++)c[b]=a(this[b]);return c}};function _36(a,b){_6?_6=_7=0:setTimeout(function(){a();_36(a,b)},b)}loop=repeat=function(a,b,c,d){if(typeof b===_11)_14||_7||(_14=_7=1,_36(arguments.callee.caller,1E3*a||100));else if("function"===typeof b)for(var e=1;e<=a;e++)b(e);else range(a,b,c).loop(d)};function _38(a,b){window[a]=function(a){var d=[];if(typeof a===_17)for(var e=a.length;0<e--;d[e]=b(a[e]));else d=b(a);return d}}(function(){var a,b;for(b in a={abs:function(a){return Math.abs(a)},sin:function(a){return Math.sin(a*_10/360)},cos:function(a){return Math.cos(a*_10/360)},tan:function(a){return Math.tan(a*_10/360)},round:function(a){return Math.round(a)},sign:function(a){return 0>a?-1:1},sqrt:function(a){return Math.sqrt(a)},sq:function(a){return a*a},minus:function(a){return-a},negative:function(a){return-a}})_38(b,a[b])})();function mod(a,b){if(typeof a===_17){for(var c=a.length,d=[];0<c--;d[c]=a[c]%b);return d}return a%b}Number.prototype._25=function(a){return Math.pow(this.valueOf(),a)};Array.prototype._25=function(a){for(var b=this.valueOf(),c=[],d=b.length;0<d--;c[d]=Math.pow(b[d],a));return c};_32=random=function(a,b){if(typeof a===_17)return a[_32(0,a.length-1)];if("string"===typeof a){var c=function(a){a=_32(1==a?155:0,2==a?255:100);return(16>a?"0":"")+a.toString(16)},d=c(1);switch(a){case "color":return"#"+c(2)+c(2)+c(2);case "red":return"#"+d+c()+c();case "green":return"#"+c()+d+c();case "blue":return"#"+c()+c()+d;case "yellow":return"#"+d+d+c();case "violet":return"#"+d+c()+d;case "teal":return"#"+c()+d+d;case "gray":return"#"+(d=c(2))+d+d}}_22=36969*((_22&65535)>>>0)+(_22>>>16);_21=18E3*((_21&65535)>>>0)+(_21>>>16);c=((_22<<16>>>0)+_21&4294967295)>>>0;return 0==a%1&&0==b%1?a+c%(b-a+1):a+c*(b-a)/4294967297};function randomize(a){typeof a===_11&&(a=0);_22=4207812181+a;_21=3203341909-a}function _(a){return typeof a===_17?a:[a]}function min(a,b){a=typeof b===_11?_(a):_(a).concat(b);for(var c=a.length,d=1E50;0<c--;)a[c]<d&&(d=a[c]);return d}function max(a,b){return-min(minus(_(a)),minus(_(b)))}function set_title(a){document.title=a}function print(a,b){_13.innerHTML+='<div style="color:'+(b||_5)+'">'+(a+"").replace(/\s/g,"&nbsp")+"</div>"}function time(){var a=new Date;return{hour:a.getHours(),minute:a.getMinutes(),second:a.getSeconds(),millisecond:a.getMilliseconds()}}function range(a,b,c){typeof b===_11&&(b=a,a=1);c=abs(c)||1;var d=[];if(a<b)for(;a<=b;a+=c)d.push(a);else for(;b<=a;a-=c)d.push(a);return d}function _48(a){return a.replace(/(\w+)\s*{/g,function(a,c,d,e){return c.match(/(else|once)/)?a:"function("+c+"){"}).replace(/([(,])\s*,/g,"$1 0,").replace(/loop\s*\((.*),\s*{/gi,"loop($1, function(_64){").replace(/loop\s+(\w+)/gi,"loop($1,function(_64){").replace(/end/gi,"})").replace(/(\w+)\s*\(\s*(\w+)\s*\)\s*=\s*(.*)/g,'_38("$1",function($2){return($3)});').replace(/static\s+(\w+)\s*=/g,"if(!_14||!_7)$1=").replace(/once\s*{/g,"if(!_14||!_7){").replace(/\^\s*([\w\.]+)\s*/g," ._25($1)").replace(/\s*\^\s*/g," ._25")}var _26,_28,_2,_3,_4,_29=0,_0=typeof localStorage===_11?{}:localStorage;window.onload=function(){_63();_60();_61();_59();_58();_62();addEventListener("keydown",function(a){27!==a.keyCode||_29||(_29=1,_41(),setTimeout(function(){_29=0},300))});$("lever").onclick=function(){_41()}};function _62(){_3.addEventListener("keydown",function(a){typeof _3._35===_11&&(_3._35=0);_3._35++%10||_16()})}window.onresize=_51=function(){_4._19&&(_9.width=width=window.innerWidth,_9.height=height=window.innerHeight,_7||(_13.innerHTML="",_52(),_34()))};function _59(){$("home")&&($("home").onclick=function(){_16();parent.location="index.html"});$("new_code").onclick=function(){_16();_33()};$("list_codes").onclick=function(){_18(_4);_49()};$("clone_code").onclick=function(){_33("Clone of "+_2.value,"// Clone of "+_2.value+" (ID: "+_0.current_code+")\n\n"+_3.value)};$("delete_code").onclick=function(){1>=_0.codes.split(/,/).length?alert("Unable to delete the last code."):confirm("Are you sure you want to delete "+_2.value+" forever?")&&_55()}}function _63(){_9=$("screen");_1=_9.getContext("2d");_13=$("notebook");_3=$("code");_26=$("owl");_2=$("filename");_28=$("lever");_4=$("code_editor")}function _44(){_12(_4);_12(_26);_28.classList.remove("run");_13.classList.add("dim");_9.classList.add("dim");_3.focus()}function _53(){_18(_4);_18(_26);_28.classList.add("run");_13.classList.remove("dim");_9.classList.remove("dim");$("_24")&&_30("_24")}function _41(){window._34=null;_16();if(1==_4._19)_4._19=0,_44(),_6=1;else{_6=0;_4._19=1;try{eval("_34=function(){"+_48(_3.value)+"\n}")}catch(a){_4._19=0,_6=1,alert(a.name+": "+a.message)}try{_51()}catch(b){_4._19=0,_6=1,alert(b.name+": "+b.message)}_6||_53()}}function _50(){_0.current_code=1E5;_0.latest_code=1E5;_0.codes="100000";_2.value=_0.name100000="Untitled 100000";_0.body100000=_3.value;_0.created100000=(new Date).toLocaleString()}function _27(a){_16();_0.current_code=a;_3.value=_0["body"+a];_2.value=_0["name"+a];_23()}function _55(){var a=_0.codes.split(/,/);if(!(1>=a.length)){var b=_0.current_code,c=a.indexOf(b);a.splice(c,1);_0.codes=a;_0.removeItem("name"+b);_0.removeItem("body"+b);_0.removeItem("created"+b);_0.removeItem("modified"+b);a[c]?_27(a[c]):_27(a[c-1])}}function _16(){_0["body"+_0.current_code]!==_3.value&&(_0["body"+_0.current_code]=_3.value,_0["modified"+_0.current_code]=(new Date).toLocaleString())}function _46(){_0["name"+_0.current_code]=_2.value}function _58(){_0.current_code?(_3.value=_0["body"+_0.current_code],_2.value=_0["name"+_0.current_code]):_50();_23()}function _33(a,b){var c=_0.current_code=_0.latest_code=(parseInt(_0.latest_code,36)+1).toString(36).toUpperCase();_0.codes+=(_0.codes.length?",":"")+c;_0["created"+c]=(new Date).toLocaleString();_2.value=_0["name"+c]=a||"Untitled "+c;_3.value=_0["body"+c]=b||"// OwlScript\n\n";_23()}function _49(){function a(a){for(var b=_8("tr"),c=0;c<a.length;c++)b.appendChild(_8("td")).innerHTML=a[c];return b}for(var b=_0.codes.split(/,/),c=_8("table"),d=0;d<b.length;d++)c.appendChild(a([b[d],_0["name"+b[d]],_0["created"+b[d]],_0["modified"+b[d]]||"Unmodified"]));b=_56("_24");b.innerHTML="";d=_8("table");d.id="code_list_heading";d.appendChild(a(["ID","Name","Created","Modified"]));b.appendChild(d);d=_8("div");d.id="code_list";d.appendChild(c);c.addEventListener("click",function(a){_12(_4);_30("_24");_27(a.target.parentNode.firstChild.innerHTML)});b.appendChild(d);_43("_24")}function _60(){_3.addEventListener("keydown",function(a){if(9===a.keyCode){var b=this.selectionStart;this.value=this.value.substring(0,b)+"    "+this.value.substring(this.selectionEnd);this.selectionStart=this.selectionEnd=b+4;a.preventDefault()}})}function _61(){_2.onfocus=_2.onchange=_2.onkeydown=_2.onkeyup=function(){this.value.trim().length||(this.value="Untitled");_46();_23()}}function _23(){var a=_8("div");a.className="filename";a.innerHTML=_2.value.replace(/\s/g,"&nbsp;");document.body.appendChild(a);var b=a.getBoundingClientRect().width;a.parentNode.removeChild(a);b<_3.getBoundingClientRect().width/2&&(_2.parentNode.style.width=_2.style.width=b+16+"px")}function _56(a,b,c,d,e){if($(a))return $(a);var f=_8("div"),g=_8("div");f.id=a;g.id="x"+a;f.className="window translucent hide superhide";g.className="window_close translucent hide superhide";f.style.width=b||"calc(75% - 4em)";f.style.height=c||"calc(75% - 4em)";g.style.left=f.style.left=d||"12.5%";g.style.top=f.style.top=e||"12.5%";g.onclick=function(){_30(a);_12(_4)};document.body.appendChild(f);document.body.appendChild(g);return f}function _43(a){_12($(a));_12($("x"+a))}function _30(a){_18($(a));_18($("x"+a))}function _8(a){return document.createElement(a)}function _18(a){a.classList.add("hide");setTimeout(function(){a.classList.add("superhide")},250)}function _12(a){a.classList.remove("superhide");setTimeout(function(){a.classList.remove("hide")},20)}function $(a){return document.getElementById(a)};